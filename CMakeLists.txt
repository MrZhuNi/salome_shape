CMAKE_MINIMUM_REQUIRED(VERSION 2.8.10)

PROJECT (NewGEOM)

SET(CMAKE_MODULE_PATH "${CMAKE_SOURCE_DIR}/CMakeCommon" ${CMAKE_MODULE_PATH})

INCLUDE(Common)
INCLUDE(FindQt)
INCLUDE(FindBoost)
INCLUDE(FindPython)
INCLUDE(FindSalome)
INCLUDE(FindSolveSpace)
INCLUDE(FindCAS)

IF(UNIX)
    IF(CMAKE_COMPILER_IS_GNUCC)
        SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=c++0x")
        MESSAGE(STATUS "Setting -std=c++0x flag for the gcc...")
        MESSAGE(STATUS "Now gcc flags are: " ${CMAKE_CXX_FLAGS})
        
	SET(CMAKE_SHARED_LINKER_FLAGS "${SMAKE_SHARED_LINKER_FLAGS} -Wl,-E")
    ENDIF(CMAKE_COMPILER_IS_GNUCC)
ENDIF(UNIX)


ADD_SUBDIRECTORY (src/Config)
ADD_SUBDIRECTORY (src/Events)
ADD_SUBDIRECTORY (src/Model)
ADD_SUBDIRECTORY (src/ModelAPI)
ADD_SUBDIRECTORY (src/GeomAPI)
ADD_SUBDIRECTORY (src/GeomAlgoAPI)
ADD_SUBDIRECTORY (src/GeomData)
ADD_SUBDIRECTORY (src/GeomDataAPI)
ADD_SUBDIRECTORY (src/PartSetPlugin)
ADD_SUBDIRECTORY (src/ConstructionPlugin)
ADD_SUBDIRECTORY (src/FeaturesPlugin)
ADD_SUBDIRECTORY (src/SketchPlugin)
ADD_SUBDIRECTORY (src/SketchSolver)
ADD_SUBDIRECTORY (src/ModuleBase)
ADD_SUBDIRECTORY (src/PartSet)
ADD_SUBDIRECTORY (src/PyConsole)
ADD_SUBDIRECTORY (src/PyEvent)
ADD_SUBDIRECTORY (src/PyInterp)
ADD_SUBDIRECTORY (src/XGUI)
ADD_SUBDIRECTORY (src/GeomApp)

IF(${HAVE_SALOME})
	ADD_SUBDIRECTORY (src/NewGeom)
ENDIF(${HAVE_SALOME})

FIND_PACKAGE(PythonInterp REQUIRED)
ENABLE_TESTING()
