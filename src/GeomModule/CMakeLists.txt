CMAKE_MINIMUM_REQUIRED(VERSION 2.8.11)

INCLUDE(Common)

SET(PROJECT_HEADERS
	GeomModule_Defs.h
	GeomModule.h
)

SET(PROJECT_SOURCES
	GeomModule.cpp
)

SET(PROJECT_RESOURCES 
    GeomModule_icons.qrc
)

SET(TEXT_RESOURCES
	GeomModule_msg_en.ts
)

SET(PROJECT_LIBRARIES
    Config
    ${Qt5Widgets_LIBRARIES}
)

QT5_ADD_RESOURCES(PROJECT_COMPILED_RESOURCES ${PROJECT_RESOURCES})
QT5_ADD_TRANSLATION(QM_RESOURCES ${TEXT_RESOURCES})

SOURCE_GROUP ("Generated Files" FILES ${PROJECT_COMPILED_RESOURCES} ${QM_RESOURCES})
SOURCE_GROUP ("Resource Files" FILES ${TEXT_RESOURCES} ${PROJECT_RESOURCES})

ADD_LIBRARY(GeomModule SHARED 
	${PROJECT_SOURCES} 
	${PROJECT_HEADERS} 
	${PROJECT_COMPILED_RESOURCES} 
	${TEXT_RESOURCES} 
	${QM_RESOURCES}
)

ADD_DEPENDENCIES(GeomModule XGUI)

INCLUDE_DIRECTORIES(${CMAKE_SOURCE_DIR}/src/XGUI)
INCLUDE_DIRECTORIES(${CMAKE_SOURCE_DIR}/src/Config)
INCLUDE_DIRECTORIES(${CMAKE_SOURCE_DIR}/src/Event)

# The Qt5Widgets_LIBRARIES variable also includes QtGui and QtCore
TARGET_LINK_LIBRARIES(GeomModule ${PROJECT_LIBRARIES})

INSTALL(TARGETS GeomModule DESTINATION bin)
