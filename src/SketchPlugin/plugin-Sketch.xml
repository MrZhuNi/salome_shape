<!-- Copyright (C) 2014-20xx CEA/DEN, EDF R&D -->

<plugin>
  <workbench id="Sketch">
    <group id="Basic">
      <feature
        id="Sketch"
        nested="SketchPoint SketchLine SketchCircle SketchArc SketchConstraintLength SketchConstraintRadius SketchConstraintDistance SketchConstraintParallel SketchConstraintPerpendicular SketchConstraintRigid SketchConstraintHorizontal SketchConstraintVertical SketchConstraintEqual SketchConstraintTangent SketchConstraintFillet SketchConstraintCoincidence SketchConstraintMirror SketchMultiRotation SketchMultiTranslation"
        when_nested="accept abort"
        title="Sketch"
        tooltip="Create sketch"
        icon=":icons/sketch.png">
        <sketch-start-label id="External" title="Select a plane on which to create a sketch" tooltip="Select a plane on which to create a sketch">
          <validator id="GeomValidators_Face" parameters="plane"/>
        </sketch-start-label>
      <!--icon=":pictures/x_point.png"-->
      </feature>
      <feature id="SketchPoint" title="Point" tooltip="Create point" icon=":icons/point.png">
        <sketch-2dpoint_selector id="PointCoordindates" title="Point" tooltip="Point coordinates"/>
        <boolvalue id="Auxiliary" label="Auxiliary" default="false" tooltip="Construction element" obligatory="0"/>
      </feature>
      <feature id="SketchLine" title="Line" tooltip="Create line" icon=":icons/line.png">
        <sketch-2dpoint_selector id="StartPoint" title="Start point" tooltip="Start point coordinates" previous_feature_param="EndPoint"/>
        <sketch-2dpoint_selector id="EndPoint" title="End point" tooltip="End point coordinates"/>
        <boolvalue id="Auxiliary" label="Auxiliary" default="false" tooltip="Construction element" obligatory="0"/>
      </feature>
      <feature id="SketchCircle" title="Circle" tooltip="Create circle" icon=":icons/circle.png">
        <sketch-2dpoint_selector id="CircleCenter" title="Center" tooltip="Center coordinates"/>
        <point2ddistance id="CircleRadius" first_point="CircleCenter" label="Radius:" min="0" step="1.0" default="0" icon=":icons/radius.png" tooltip="Set radius">
          <validator id="GeomValidators_Positive"/>
        </point2ddistance>
        <boolvalue id="Auxiliary" label="Auxiliary" default="false" tooltip="Construction element" obligatory="0"/>
      </feature>
      <feature id="SketchArc" title="Arc" tooltip="Create arc" icon=":icons/arc.png">
        <sketch-2dpoint_selector id="ArcCenter" title="Center" tooltip="Center of a circle"/>
        <sketch-2dpoint_selector id="ArcStartPoint" title="Start point" tooltip="Start point"/>
        <sketch-2dpoint_selector id="ArcEndPoint" title="End point" tooltip="End point"/>
        <boolvalue id="Auxiliary" label="Auxiliary" default="false" tooltip="Construction element" obligatory="0"/>
      </feature>
    </group>
      
    <group id="Constraints">
    <!--  SketchConstraintDistance  -->
      <feature
        id="SketchConstraintDistance"
        title="Distance"
        tooltip="Set fixed distance from a point to an object"
        icon=":icons/distance.png">
        <label title="Select objects for distance definition. Following objects can be accepted: point, line or arc end point, center of circle or arc."/>
        <sketch_shape_selector
              id="ConstraintEntityA"
              label="First object"
              tooltip="Select point, line end point, line, center of circle or arc."
              shape_types="edge vertex">
          <validator id="SketchPlugin_ExternalValidator" parameters="ConstraintEntityB"/>
          <validator id="PartSet_DifferentObjects"/>
          <validator id="GeomValidators_ShapeType" parameters="vertex,line"/>
        </sketch_shape_selector>/>
        <sketch_shape_selector 
          id="ConstraintEntityB" 
          label="Second object" 
          tooltip="Select point, line end point, line, center of circle or arc." 
          shape_types="edge vertex">
          <validator id="PartSet_DifferentObjects"/>
          <validator id="SketchPlugin_DistanceAttr" parameters="ConstraintEntityA"/>
          <validator id="SketchPlugin_ExternalValidator" parameters="ConstraintEntityA"/>
          <validator id="GeomValidators_ShapeType" parameters="vertex,line"/>
        </sketch_shape_selector>
        <sketch-2dpoint_selector id="ConstraintFlyoutValuePnt"  default="computed" internal="1" obligatory="0"/>
        
        <doublevalue_editor label="Value" tooltip="Distance" id="ConstraintValue" default="computed" min="0">
          <validator id="GeomValidators_Positive"/>
        </doublevalue_editor>
        
        <validator id="PartSet_DistanceSelection"/>
      </feature>
      
    <!--  SketchConstraintLength  -->      
      <feature id="SketchConstraintLength" title="Length" tooltip="Set fixed length of a line segment" icon=":icons/length.png">
        <label title="Select a line on which to calculate length" tooltip="Select a line on which to calculate length"/>
        <shape_selector id="ConstraintEntityA" label="Line" tooltip="Select an line" 
            shape_types="edge" >
        <validator id="GeomValidators_ShapeType" parameters="line"/>
    </shape_selector>
        <sketch-2dpoint_selector id="ConstraintFlyoutValuePnt" default="computed" internal="1" obligatory="0"/>
        <doublevalue_editor label="Value" tooltip="Length" id="ConstraintValue" default="computed">
          <validator id="GeomValidators_Positive"/>
        </doublevalue_editor>
        <validator id="PartSet_LengthSelection"/>
      </feature>
      
    <!--  SketchConstraintRadius  -->
      <feature id="SketchConstraintRadius" title="Radius" tooltip="Set fixed radius of a circle or an arc" icon=":icons/radius_constr.png">
        <label title="Select a circle or an arc on which to calculate radius" tooltip="Select a circle or an arc on which to calculate radius"/>
        <shape_selector id="ConstraintEntityA" label="Circle or Arc" tooltip="Select a circle or an arc" 
            shape_types="edge">
            <validator id="GeomValidators_ShapeType" parameters="circle"/>
        </shape_selector>
        <sketch-2dpoint_selector id="ConstraintFlyoutValuePnt"  default="computed" internal="1" obligatory="0"/>
        <doublevalue_editor label="Value" tooltip="Radius" id="ConstraintValue" default="computed"/>
        <validator id="PartSet_RadiusSelection"/>
      </feature>
      
    <!--  SketchConstraintParallel  -->
      <feature id="SketchConstraintParallel" title="Parallel" tooltip="Create constraint defining two parallel lines" icon=":icons/parallel.png">
        <sketch_shape_selector id="ConstraintEntityA" 
            label="First line" tooltip="Select a line" shape_types="edge">
          <validator id="GeomValidators_ShapeType" parameters="line"/>
          <validator id="PartSet_DifferentObjects"/>
          <validator id="SketchPlugin_ExternalValidator" parameters="ConstraintEntityB"/>
        </sketch_shape_selector>
        
        <sketch_shape_selector id="ConstraintEntityB" label="Second line" tooltip="Select a line" 
            shape_types="edge">
            <validator id="GeomValidators_ShapeType" parameters="line"/>
            <validator id="PartSet_DifferentObjects"/>
            <validator id="SketchPlugin_ExternalValidator" parameters="ConstraintEntityA"/>
        </sketch_shape_selector>
        <validator id="PartSet_ParallelSelection"/>
      </feature>
      
    <!--  SketchConstraintPerpendicular  -->
      <feature id="SketchConstraintPerpendicular" title="Perpendicular" 
        tooltip="Create constraint defining two perpendicular lines" 
        icon=":icons/perpendicular.png">
        <sketch_shape_selector id="ConstraintEntityA" 
            label="First line" tooltip="Select an line" 
            shape_types="edge">
          <validator id="PartSet_DifferentObjects"/>
          <validator id="SketchPlugin_ExternalValidator" parameters="ConstraintEntityB"/>
            <validator id="GeomValidators_ShapeType" parameters="line"/>
        </sketch_shape_selector>
        
        <sketch_shape_selector id="ConstraintEntityB" 
            label="Second line" tooltip="Select an line" 
            shape_types="edge">
            <validator id="PartSet_DifferentObjects"/>
          <validator id="SketchPlugin_ExternalValidator" parameters="ConstraintEntityA"/>
            <validator id="GeomValidators_ShapeType" parameters="line"/>
        </sketch_shape_selector>
        <validator id="PartSet_PerpendicularSelection"/>
      </feature>

      <!--  SketchConstraintCoincedence  -->
      <feature id="SketchConstraintCoincidence" title="Coincident" tooltip="Create constraint for the coincidence of two points or point on line or circle" icon=":icons/coincedence.png">
        <sketch_shape_selector id="ConstraintEntityA" label="First object" tooltip="Select a first object" shape_types="vertex edge">
          <validator id="PartSet_DifferentObjects"/>
          <validator id="SketchPlugin_ExternalValidator" parameters="ConstraintEntityB"/>
        </sketch_shape_selector>
        <sketch_shape_selector id="ConstraintEntityB" label="Second object" tooltip="Select a second object" shape_types="vertex edge">
          <validator id="PartSet_DifferentObjects"/>
          <validator id="SketchPlugin_ExternalValidator" parameters="ConstraintEntityA"/>
          <validator id="SketchPlugin_CoincidenceAttr" parameters="ConstraintEntityA"/>
        </sketch_shape_selector>
        <validator id="PartSet_CoincidentSelection"/>
      </feature>

      <!--  SketchConstraintRigid  -->
      <feature id="SketchConstraintRigid" title="Fixed" tooltip="Fix an object" icon=":icons/fixed.png">
        <sketch_shape_selector id="ConstraintEntityA" label="Object"
                        tooltip="Select point, line end point, line, center of circle or arc."
                        shape_types="edge vertex">
          <validator id="GeomValidators_ShapeType" parameters="vertex,line,circle"/>
          <validator id="SketchPlugin_NotFixed"/>
        </sketch_shape_selector>
        <validator id="PartSet_RigidSelection"/>
      </feature>

      <!--  SketchConstraintHorizontal  -->
      <feature id="SketchConstraintHorizontal" title="Horizontal" tooltip="Create constraint defining horizontal line" icon=":icons/horisontal.png">
        <sketch_shape_selector id="ConstraintEntityA" 
            label="Line" tooltip="Select a line" shape_types="edge" use_external="false">
            <validator id="GeomValidators_ShapeType" parameters="line"/>
        </sketch_shape_selector>
        <validator id="PartSet_HVDirSelection"/>
      </feature>
      
    <!--  SketchConstraintVertical  -->
      <feature id="SketchConstraintVertical" title="Vertical" tooltip="Create constraint defining vertical line" icon=":icons/vertical.png">
        <sketch_shape_selector id="ConstraintEntityA" 
            label="Line" tooltip="Select a line" shape_types="edge" use_external="false">
            <validator id="GeomValidators_ShapeType" parameters="line"/>
        </sketch_shape_selector>
        <validator id="PartSet_HVDirSelection"/>
      </feature>
      
    <!--  SketchConstraintEqual  -->
      <feature id="SketchConstraintEqual" title="Equal"
        tooltip="Create constraint defining equal lengths of two lines or line and arc or equal radii of two arcs or two circles or arc and circle"
        icon=":icons/equal.png">
        <sketch_shape_selector id="ConstraintEntityA" 
            label="First object" tooltip="Select line, circle or arc" shape_types="edge">
          <validator id="PartSet_DifferentObjects"/>
          <validator id="SketchPlugin_ExternalValidator" parameters="ConstraintEntityB"/>
        </sketch_shape_selector>
        
        <sketch_shape_selector id="ConstraintEntityB"
            label="Second object" tooltip="Select line, circle or arc" shape_types="edge">
          <validator id="SketchPlugin_EqualAttr" parameters="ConstraintEntityA"/>
          <validator id="PartSet_DifferentObjects"/>
          <validator id="SketchPlugin_ExternalValidator" parameters="ConstraintEntityA"/>
        </sketch_shape_selector>
      </feature>
      
    <!--  SketchConstraintTangent  -->
      <feature id="SketchConstraintTangent" title="Tangent" tooltip="Create constraint defining tangency of two objects" icon=":icons/tangent.png">
        <sketch_shape_selector id="ConstraintEntityA" 
            label="First object" tooltip="Select line or arc" shape_types="edge">
          <validator id="PartSet_DifferentObjects"/>
        </sketch_shape_selector>
        
        <sketch_shape_selector id="ConstraintEntityB"
            label="Second object" tooltip="Select line or arc" shape_types="edge">
        <validator id="SketchPlugin_TangentAttr" parameters="ConstraintEntityA"/>
        <validator id="PartSet_DifferentObjects"/>
        </sketch_shape_selector>
        <validator id="PartSet_TangentSelection"/>
      </feature>
      
         
    </group>
    
    <group id="Edit">
      <!--  SketchConstraintFillet  -->
      <feature id="SketchConstraintFillet" title="Fillet" tooltip="Create constraint defining fillet between two objects" icon=":icons/fillet.png">
        <sketch_shape_selector id="ConstraintEntityA" 
            label="First object" tooltip="Select line or arc" shape_types="edge">
          <validator id="PartSet_DifferentObjects"/>
        </sketch_shape_selector>

        <sketch_shape_selector id="ConstraintEntityB"
            label="Second object" tooltip="Select line or arc" shape_types="edge">
          <validator id="PartSet_DifferentObjects"/>
        </sketch_shape_selector>

        <doublevalue label="Value" tooltip="Fillet radius" id="ConstraintValue" min="0">
          <validator id="GeomValidators_Positive"/>
        </doublevalue>
        <validator id="PartSet_FilletSelection"/>
      </feature>
      
      <!--  SketchConstraintMirror  -->
      <feature
        id="SketchConstraintMirror"
        title="Mirror" icon=":icons/mirror.png"
        tooltip="Create constraint, mirroring group of objects">
        <sketch_shape_selector id="ConstraintEntityA"
            label="Mirror line" tooltip="Select mirror line" shape_types="edge">
            <validator id="GeomValidators_ShapeType" parameters="line"/>
        </sketch_shape_selector>
        <sketch_multi_selector id="ConstraintMirrorList"
            label="List of objects"
            tooltip="Select list of mirroring objects"
            type_choice="Edges"
            use_external="true">
            <validator id="SketchPlugin_MirrorAttr" />
        </sketch_multi_selector>
      </feature>
      <!--  SketchMultiTranslation  -->
      <feature
        id="SketchMultiTranslation"
        title="Translation" icon=":icons/translate.png"
        tooltip="Make a number of shifted copies of a group of objects">
        <sketch_multi_selector id="MultiTranslationList"
            label="List of objects"
            tooltip="Select list of translating objects"
            type_choice="Edges"
            use_external="true">
          <validator id="SketchPlugin_CopyValidator" />
        </sketch_multi_selector>
        <groupbox title="Direction">
          <sketch-2dpoint_selector
              id="MultiTranslationStartPoint"
              title="Start point"
              tooltip="Start point of translation"/>
          <sketch-2dpoint_selector
              id="MultiTranslationEndPoint"
              title="End point"
              tooltip="Final point of translation"/>
        </groupbox>
        <integervalue id="MultiTranslationCopies"
            label="Number of copies"
            tooltip="Number of copies" 
            default="1" min="1" use_reset="false">
          <validator id="GeomValidators_Positive"/>
        </integervalue>
      </feature>
      <!--  SketchMultiRotation  -->
      <feature
        id="SketchMultiRotation"
        title="Rotation" icon=":icons/rotate.png"
        tooltip="Make a number of rotated copies of a group of objects">
        <sketch_multi_selector id="MultiRotationList"
            label="List of objects"
            tooltip="Select list of rotating objects"
            type_choice="Edges"
            use_external="true">
          <validator id="SketchPlugin_CopyValidator" />
        </sketch_multi_selector>
        <sketch-2dpoint_selector
            id="MultiRotationCenter"
            title="Center of rotation"
            tooltip="Center of rotation"/>
        <point2dangle id="MultiRotationAngle"
                         first_point="MultiRotationCenter"
                         label="Angle"
                         icon=":icons/angle.png"
                         tooltip="Rotation angle"
                         default="90"/>
        <integervalue id="MultiRotationCopies"
            label="Number of copies"
            tooltip="Number of copies" 
            default="1" min="1" use_reset="false">
          <validator id="GeomValidators_Positive"/>
        </integervalue>
      </feature>
    </group>
  </workbench>
</plugin>
