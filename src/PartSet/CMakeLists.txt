INCLUDE(Common)
SET(CMAKE_AUTOMOC ON)

SET(PROJECT_HEADERS
	PartSet.h
	PartSet_Module.h
)

SET(PROJECT_SOURCES
	PartSet_Module.cpp
)

SET(PROJECT_RESOURCES 
    PartSet_icons.qrc
)

SET(TEXT_RESOURCES
	PartSet_msg_en.ts
)

SET(PROJECT_LIBRARIES
    ModuleBase
    Config
    ${QT_LIBRARIES}
)

SET(PROJECT_AUTOMOC 
    ${CMAKE_CURRENT_BINARY_DIR}/PartSet_automoc.cpp
)

QT4_ADD_RESOURCES(PROJECT_COMPILED_RESOURCES ${PROJECT_RESOURCES})
QT4_ADD_TRANSLATION(QM_RESOURCES ${TEXT_RESOURCES})

SOURCE_GROUP ("Generated Files" FILES ${PROJECT_AUTOMOC} ${PROJECT_COMPILED_RESOURCES} ${QM_RESOURCES})
SOURCE_GROUP ("Resource Files" FILES ${TEXT_RESOURCES} ${PROJECT_RESOURCES})

INCLUDE_DIRECTORIES(${CMAKE_SOURCE_DIR}/src/XGUI 
                    ${CMAKE_SOURCE_DIR}/src/Config
                    ${CMAKE_SOURCE_DIR}/src/Event
                    ${CMAKE_SOURCE_DIR}/src/ModuleBase
)

ADD_DEFINITIONS(-DPARTSET_EXPORTS)
ADD_LIBRARY(PartSet SHARED 
	${PROJECT_SOURCES} 
	${PROJECT_HEADERS} 
	${PROJECT_COMPILED_RESOURCES} 
	${TEXT_RESOURCES} 
	${QM_RESOURCES}
)

# The Qt5Widgets_LIBRARIES variable also includes QtGui and QtCore
TARGET_LINK_LIBRARIES(PartSet ${PROJECT_LIBRARIES})

ADD_DEPENDENCIES(PartSet ModuleBase)

INSTALL(TARGETS PartSet DESTINATION bin)
