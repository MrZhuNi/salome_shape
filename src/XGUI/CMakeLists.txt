CMAKE_MINIMUM_REQUIRED(VERSION 2.8.11)

INCLUDE(FindCAS)

SET(CMAKE_AUTOMOC ON)

SET(PROJECT_HEADERS
	XGUI_Command.h
	XGUI_MainMenu.h
	XGUI_MainWindow.h
	XGUI_MenuGroupPanel.h
	XGUI_Tools.h
	XGUI_Workbench.h
	XGUI_Workshop.h
    XGUI_ViewWindow.h
    XGUI_ViewPort.h
    XGUI_Viewer.h
	XGUI_RubberBand.h
	XGUI_Constants.h
	XGUI_ViewBackground.h
)

SET(PROJECT_AUTOMOC 
    ${CMAKE_CURRENT_BINARY_DIR}/XGUI_automoc.cpp
)

SET(PROJECT_SOURCES
	XGUI_Command.cpp
	XGUI_Main.cpp
	XGUI_MainMenu.cpp
	XGUI_MainWindow.cpp
	XGUI_MenuGroupPanel.cpp
	XGUI_Tools.cpp
	XGUI_Workbench.cpp
	XGUI_Workshop.cpp
    XGUI_ViewWindow.cpp
    XGUI_ViewPort.cpp
    XGUI_Viewer.cpp
	XGUI_RubberBand.cpp
	XGUI_ViewBackground.cpp
)

SET(PROJECT_RESOURCES 
    XGUI_pictures.qrc
)

SET(TEXT_RESOURCES
	XGUI_msg_en.ts
)

SET(PROJECT_LIBRARIES
	opengl32
    Event
    Config
	${Qt5Widgets_LIBRARIES}
	${CAS_VIEWER}
	${CAS_KERNEL}
	PyConsole
	PyInterp
	PyEvent
)

QT5_ADD_RESOURCES(PROJECT_COMPILED_RESOURCES ${PROJECT_RESOURCES})
QT5_ADD_TRANSLATION(QM_RESOURCES ${TEXT_RESOURCES})

SOURCE_GROUP ("Generated Files" FILES ${PROJECT_AUTOMOC} ${PROJECT_COMPILED_RESOURCES} ${QM_RESOURCES})
SOURCE_GROUP ("Resource Files" FILES ${TEXT_RESOURCES} ${PROJECT_RESOURCES})

ADD_DEFINITIONS(${CAS_DEFINITIONS} )

INCLUDE_DIRECTORIES (${PROJECT_SOURCE_DIR}/src/Event
					 ${PROJECT_SOURCE_DIR}/src/Config
					 ${PROJECT_SOURCE_DIR}/src/PyInterp
					 ${PROJECT_SOURCE_DIR}/src/PyConsole
					 ${CAS_INCLUDE_DIRS})

LINK_DIRECTORIES($ENV{PYTHON_LIB_DIR})

ADD_EXECUTABLE(XGUI WIN32 
	${PROJECT_SOURCES} 
	${PROJECT_HEADERS} 
	${PROJECT_COMPILED_RESOURCES} 
	${TEXT_RESOURCES} 
	${QM_RESOURCES}
)

# The Qt5Widgets_LIBRARIES variable also includes QtGui and QtCore
TARGET_LINK_LIBRARIES(XGUI ${PROJECT_LIBRARIES})

INSTALL(TARGETS XGUI DESTINATION bin)
INSTALL(FILES ${QM_RESOURCES} DESTINATION bin)
